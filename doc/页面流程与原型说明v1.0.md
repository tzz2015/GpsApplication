# 遨游轨迹 HarmonyOS App 页面流程与原型说明 V1.0

> 目标：基于《需求文档v1.0》和《业务流程文档v1.0》，给出首版 HarmonyOS App 的页面结构、跳转关系和核心原型说明，便于 UI/交互设计与 ArkTS 开发落地。

## 一、整体信息架构（IA）

### 1.1 顶层导航结构（Tab 方案，V1.0 建议）

- **底部 Tab1：首页**
  - 入口：App 启动后默认进入（登录后）。
  - 首页**顶部两个 Tab 切换**：「我的轨迹」|「所有轨迹」。
  - **我的轨迹**：展示当前用户创建的所有扫墓轨迹列表，可新建、查看、编辑、删除、分享；无数据时居中显示空布局，有数据时创建入口置顶、下列表。
  - **所有轨迹**：展示所有设置为公开的轨迹列表，按创建时间倒序，任何用户可进详情只读；无数据时显示空布局，点击可跳转到「我的轨迹」去创建。
- **底部 Tab2：个人中心**
  - 功能：展示个人信息（昵称、头像等）、账号设置、关于信息等。

### 1.2 页面列表总览  

1. `P0-启动与登录相关`
   - P0-1 启动/冷启动页（Splash，可选）
   - P0-2 登录页（仅鸿蒙授权登录）
2. `P1-轨迹主流程`
   - P1-0 首页（顶部 Tab：我的轨迹 | 所有轨迹）
   - P1-2 新建/编辑轨迹基础信息页
   - P1-3 轨迹记录页（地图 + 实时轨迹，支持暂停/继续）
   - P1-4 轨迹详情页（地图 + 起点/打卡点/终点列表 + 操作区）
   - P1-5 打卡点（墓地点）详情页（含图文记录）
3. `P2-分享与查看`
   - P2-1 分享海报/分享选项弹窗（简版）
   - P2-2 分享查看页（App 内查看某条共享轨迹）
4. `P3-个人中心`
   - P3-1 个人中心首页
   - P3-2 个人信息编辑页

下文按「页面 → 关键元素 → 典型交互 → 与业务流程映射」的方式说明。

---

## 二、P0 启动与登录相关

### 2.1 P0-1 启动/冷启动页（可选）

- **场景**：App 冷启动短暂展示 LOGO & 名称，可顺带做权限预申请引导。
- **核心元素**：
  - App LOGO、项目名称「遨游轨迹」。
  - 「Powered by HarmonyOS」字样（可选）。
- **跳转逻辑**：
  - 启动完成后检测本地登录态：
    - 已登录 → 进入 P1-0 首页。
    - 未登录 → 进入 P0-2 登录页。

### 2.2 P0-2 登录页

- **对应业务流程**：业务文档 5.1 登录流程（V1.0 仅鸿蒙授权）。
- **核心区域布局（原型描述）**：
  - 顶部：App 名称 + 简要说明（「记录扫墓轨迹，守护家族记忆」）。
  - 中部：
    - **鸿蒙授权登录**：
      - 「使用鸿蒙账号登录」按钮（调用系统账号授权）。
  - 底部：
    - 协议勾选与隐私声明链接。
- **主要交互**：
  - 用户点击「使用鸿蒙账号登录」 → 系统弹出鸿蒙账号授权确认 → 用户确认后完成登录。
  - 登录成功后：
    - 首次登录：可跳转 P3-2 个人信息编辑页引导完善昵称/头像，再返回首页。
    - 非首次：直接进入 P1-0 首页。

---

## 三、P1 轨迹主流程

### 3.0 P1-0 首页（顶部 Tab：我的轨迹 | 所有轨迹）

- **对应业务流程**：轨迹查看与分享 5.2、整体流程 1.2。
- **入口**：
  - 登录成功后的默认首页。
  - 底部 Tab「首页」。
- **顶部 Tab 切换**：首页内顶部两个 Tab——「我的轨迹」「所有轨迹」。
- **核心元素与交互**：

  **（1）我的轨迹 Tab**
  - **有数据时**：顶部为创建入口（如「+ 新建」按钮或创建区域置顶），下方为当前用户创建的轨迹列表；每行展示轨迹名称、简短描述/缩略图（可选）、创建日期、状态标签（编辑中/已完成）；支持更多操作（查看详情、重命名、删除）。
  - **无数据时**：居中显示空布局（空状态文案/插图），引导用户创建第一条轨迹。
  - 点击创建入口 → 跳转 P1-2 新建轨迹基础信息页；点击轨迹卡片 → 跳转 P1-4 轨迹详情页。

  **（2）所有轨迹 Tab**
  - **有数据时**：展示所有公开轨迹列表，按创建时间倒序；每行展示轨迹名称、创建者昵称（可选）、简短描述/缩略图（可选）、创建日期；点击卡片 → 跳转 P1-4 轨迹详情页（只读模式）。
  - **无数据时**：显示空布局（空状态文案/插图）；点击空布局 → 跳转到「我的轨迹」Tab，引导用户去创建。

### 3.2 P1-2 新建/编辑轨迹基础信息页

- **对应业务流程**：轨迹创建 5.1 第 2 步。
- **核心元素**：
  - 输入框：轨迹名称（必填）。
  - 多行文本：轨迹简介（选填）。
  - 下方提示：建议说明本次扫墓的地区、主要祖先、日期等。
  - 底部按钮：
    - 「保存并开始记录」。
- **主要交互**：
  - 用户填写名称/简介 → 点击「保存并开始记录」：
    - 创建一条轨迹记录，状态为「编辑中」；
    - 跳转到 P1-3 轨迹记录页。

### 3.3 P1-3 轨迹记录页（地图 + 实时轨迹，支持暂停/继续）

- **对应业务流程**：5.1 的第 3～7 步、5.2 整个流程图。
- **布局建议**：
  - 上方大区域：地图视图（支持 2D/3D 切换，展示当前位置）。
  - 地图上：
    - 当前 GPS 定位点；
    - 已记录轨迹折线（polyline）；
    - 起点、已完成的打卡点（墓地点）标记。
  - 下方控制面板（固定在底部）：
    - 当前状态显示（如「录制中」/「已暂停」）。
    - 按钮区：
      - 「设置起点/重新设置起点」或当前起点名称显示。
      - 「设置打卡点」：到达某墓地时点击，输入打卡点名称，跳转 P1-5 填写图文后返回继续记录。
      - 「暂停」/「继续」：暂停或恢复轨迹记录。
      - 「设置终点」：完成所有打卡点后点击，输入终点名称，结束轨迹。
    - 状态信息：已行走时间/大致距离、当前海拔（可选）。
- **典型交互流程**：
  1. 首次进入时若尚未设置起点：
     - 弹出对话框提示「请确认当前位置为扫墓起点」；
     - 用户输入起点名称 → 开始记录轨迹点。
  2. 行走过程中：
     - 每隔 n 秒或 n 米，记录一个点（后台服务或前台定时）。
     - 地图实时更新折线。
     - 可随时点击「暂停」暂停记录，点击「继续」恢复记录。
  3. 到达某一墓地点：
     - 点击「设置打卡点」 → 弹出输入框填写打卡点名称（如「xx祖墓」）；
     - 保存当前点数据 → 跳转 P1-5 打卡点详情页，用户填写图文后返回 P1-3 继续记录。
  4. 当所有墓地点都记录完：
     - 点击「设置终点」 → 输入终点名称；
     - 轨迹状态置为「已完成」，跳转 P1-4 轨迹详情页。

### 3.4 P1-4 轨迹详情页

- **对应业务流程**：5.2 轨迹查看与分享。
- **布局结构**：
  - 顶部：轨迹名称 + 编辑图标（可修改名称 / 简介）。
  - 次要信息：创建时间、打卡点数量、总里程/海拔变化（可选）。
  - 中部：地图视图
    - 展示整条轨迹 polyline。
    - 起点、各打卡点（墓地点）标记，可点击进入 P1-5。
  - 下方列表：起点、打卡点列表、终点
    - 每项：序号、名称、有无图文记录标记。
  - 底部操作区：
    - 「分享轨迹」
    - 「删除轨迹」
- **主要交互**：
  - 点击某个打卡点标记或列表项 → 跳转 P1-5 打卡点（墓地点）详情页。
  - 点击「分享轨迹」 → 弹出 P2-1 分享选项。

### 3.5 P1-5 打卡点（墓地点）详情页（含图文记录）

- **对应业务流程**：6.3 打卡点图文记录。
- **核心元素**：
  - 标题：打卡点名称（如「祖父某某之墓」）。
  - 基本信息区：
    - 所属轨迹 + 打卡点序号。
    - 经纬度、海拔（可折叠查看）。
  - 图文内容区：
    - 文字说明（多行文本）。
    - 照片网格（多张图片缩略图，点击放大预览）。
  - 底部按钮：
    - 「编辑图文」
    - 「删除图文」（包含确认弹窗）。
- **主要交互**：
  - 从 P1-3 设置打卡点后，自动跳转此页，引导用户填写文字+图片并保存，返回 P1-3 继续记录。
  - 从 P1-4 或地图标记点击进入，可查看/修改已保存内容。

---

## 四、P2 分享与查看

### 4.1 P2-1 分享选项弹窗/页

- **触发入口**：P1-4 轨迹详情页 → 「分享轨迹」。
- **内容**：
  - 分享方式列表：微信好友、朋友圈、复制链接等。
  - 预览区域：简单显示轨迹标题 + 封面图（可取地图截图或首张墓地点照片）。
  - 「生成二维码」按钮：展示二维码大图，方便线下扫码。

### 4.2 P2-2 分享查看页（App 内）

- **场景**：用户通过分享链接在手机上打开 App 后看到的页面。
- **内容**：
  - 与 P1-4 类似，但去掉/禁用编辑、删除按钮，只保留只读视图。
  - 若未登录，可提供「登录后保存到我的轨迹」入口（V1 可选）。

---

## 五、P3 个人中心

### 5.1 P3-1 个人中心首页

- **入口**：底部 Tab2「个人中心」。
- **元素**：
  - 顶部：头像 + 昵称（鸿蒙账号信息）。
  - 中部菜单：
    - 「编辑个人信息」 → P3-2。
    - 「关于遨游轨迹」。
    - 「隐私政策与用户协议」。
    - （预留）「意见反馈」。

### 5.2 P3-2 个人信息编辑页

- **内容**：
  - 头像上传/更换。
  - 昵称编辑。
  - 简短个性签名（可选）。

---

## 六、页面与业务流程的映射总结

- **登录流程（业务 5.1，V1.0 仅鸿蒙授权）** → P0-2、P3-2。
- **轨迹创建与记录（业务 5.1）** → 首页-我的轨迹 → P1-2 → P1-3（设置起点 → 可选暂停/继续 → 设置打卡点 → P1-5 图文 → 返回 P1-3 → 设置终点）→ P1-4。
- **打卡点（墓地点）图文记录（业务 6.3）** → P1-5。
- **轨迹查看与分享（业务 5.2）** → 首页（我的轨迹 / 所有轨迹）→ P1-4 → P2-1 → P2-2。

 
