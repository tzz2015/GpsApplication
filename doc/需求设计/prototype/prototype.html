<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>遨游轨迹 - HarmonyOS App 原型 v4 (与当前 App UI 对齐)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ==================== 全局重置与设计系统（蓝+金+绿 三色体系） ==================== */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
          /* 主色 — 品牌蓝 */
          --primary: #2563EB;
          --primary-dark: #1D4ED8;
          --primary-deeper: #1E3A8A;
          --primary-light: #DBEAFE;
          --primary-lighter: #EFF6FF;
          /* 强调色 — 琥珀黄（点睛） */
          --accent: #F59E0B;
          --accent-dark: #D97706;
          --accent-light: #FEF3C7;
          /* 功能色 — 成功/警告/危险 */
          --success: #10B981;
          --success-dark: #059669;
          --success-light: #D1FAE5;
          --warning: #F59E0B;
          --warning-light: #FEF3C7;
          --danger: #EF4444;
          --danger-light: #FEE2E2;
          /* 中性色与背景 */
          --bg: #F0F4F8;
          --card: #FFFFFF;
          --text-primary: #0F172A;
          --text-secondary: #475569;
          --text-hint: #94A3B8;
          --border: #E2E8F0;
          /* 阴影 */
          --shadow-sm: 0 1px 2px rgba(30,58,138,0.05);
          --shadow: 0 1px 3px rgba(30,58,138,0.08), 0 1px 2px rgba(30,58,138,0.04);
          --shadow-md: 0 4px 6px -1px rgba(30,58,138,0.08), 0 2px 4px -2px rgba(30,58,138,0.05);
          --shadow-lg: 0 10px 15px -3px rgba(30,58,138,0.1), 0 4px 6px -4px rgba(30,58,138,0.05);
          --shadow-xl: 0 20px 25px -5px rgba(30,58,138,0.12), 0 8px 10px -6px rgba(30,58,138,0.05);
          /* 圆角 — 鸿蒙 4px 倍数 */
          --radius-xs: 4px;
          --radius-sm: 8px;
          --radius: 12px;
          --radius-lg: 16px;
          --radius-xl: 20px;
          --radius-2xl: 24px;
          --radius-full: 999px;
          /* 安全区 */
          --safe-top: 44px;
          --safe-bottom: 34px;
          --tab-height: 56px;
        }

        html, body {
          width: 100%; height: 100%;
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'HarmonyOS Sans', 'PingFang SC', sans-serif;
          font-size: 16px;
          color: var(--text-primary);
          background: #0F172A;
          overflow: hidden;
          -webkit-font-smoothing: antialiased;
        }

        /* ==================== 手机壳容器 ==================== */
        .phone-frame {
          position: absolute;
          left: 50%; top: 50%;
          transform: translate(-50%, -50%);
          width: 375px; height: 812px;
          background: var(--bg);
          border-radius: 44px;
          overflow: hidden;
          box-shadow: 0 0 0 8px #1E293B, 0 0 0 10px #334155, var(--shadow-xl), 0 0 80px rgba(37,99,235,0.2);
        }

        /* ==================== 状态栏 ==================== */
        .status-bar {
          position: absolute; top: 0; left: 0; right: 0;
          height: var(--safe-top);
          display: flex; align-items: center; justify-content: space-between;
          padding: 12px 24px 0;
          font-size: 12px; font-weight: 600;
          z-index: 100;
          color: #fff;
        }
        .status-bar.dark { color: var(--text-primary); }
        .status-bar .time { font-size: 14px; font-weight: 700; }
        .status-bar .icons { display: flex; gap: 4px; align-items: center; font-size: 11px; }

        /* ==================== 页面容器 ==================== */
        .page {
          position: absolute; top: 0; left: 0; right: 0; bottom: 0;
          display: none;
          flex-direction: column;
          overflow: hidden;
          background: var(--bg);
        }
        .page.active { display: flex; }
        .page-content {
          flex: 1;
          overflow-y: auto;
          -webkit-overflow-scrolling: touch;
        }
        .page-content::-webkit-scrollbar { display: none; }

        /* ==================== 导航栏 ==================== */
        .nav-bar {
          height: 56px;
          padding: 0 16px;
          display: flex; align-items: center; justify-content: space-between;
          background: var(--card);
          margin-top: var(--safe-top);
          position: relative;
          z-index: 10;
          border-bottom: 0.5px solid var(--border);
        }
        .nav-bar .nav-title {
          font-size: 17px; font-weight: 700;
          position: absolute; left: 50%; transform: translateX(-50%);
        }
        .nav-bar .nav-back {
          width: 32px; height: 32px;
          display: flex; align-items: center; justify-content: center;
          cursor: pointer;
          color: var(--primary);
          border-radius: var(--radius-sm);
          transition: background 0.2s;
        }
        .nav-bar .nav-back:hover { background: var(--primary-light); }
        .nav-bar .nav-back svg { width: 20px; height: 20px; }
        .nav-bar .nav-action {
          font-size: 14px; color: var(--primary);
          cursor: pointer; font-weight: 600;
        }

        /* ==================== 底部 TabBar ==================== */
        .tab-bar {
          position: absolute; bottom: 0; left: 0; right: 0;
          height: calc(var(--tab-height) + var(--safe-bottom));
          padding-bottom: var(--safe-bottom);
          background: var(--card);
          display: flex;
          border-top: 0.5px solid var(--border);
          z-index: 50;
        }
        .tab-item {
          flex: 1;
          display: flex; flex-direction: column;
          align-items: center; justify-content: center;
          gap: 3px;
          cursor: pointer;
          color: var(--text-hint);
          transition: color 0.2s;
          font-size: 10px;
        }
        .tab-item.active { color: var(--primary); }
        .tab-item .tab-icon {
          width: 24px; height: 24px;
          display: flex; align-items: center; justify-content: center;
        }
        .tab-item .tab-icon svg { width: 22px; height: 22px; }
        .tab-item .tab-label { font-weight: 500; }

        /* ==================== 通用组件 ==================== */
        .btn {
          display: inline-flex; align-items: center; justify-content: center; gap: 6px;
          padding: 12px 24px;
          border: none; border-radius: var(--radius);
          font-size: 15px; font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease-out;
          text-decoration: none;
        }
        .btn-primary {
          background: var(--primary);
          color: #fff;
          box-shadow: 0 2px 8px rgba(37,99,235,0.3);
        }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(37,99,235,0.35); }
        .btn-accent {
          background: var(--accent);
          color: #fff;
          box-shadow: 0 2px 8px rgba(245,158,11,0.3);
        }
        .btn-accent:hover { background: var(--accent-dark); }
        .btn-success {
          background: var(--success);
          color: #fff;
          box-shadow: 0 2px 8px rgba(16,185,129,0.3);
        }
        .btn-outline {
          background: transparent;
          border: 1.5px solid var(--border);
          color: var(--text-secondary);
        }
        .btn-outline:hover { border-color: var(--primary); color: var(--primary); background: var(--primary-light); }
        .btn-block { width: 100%; }
        .btn-lg { padding: 16px 32px; font-size: 16px; border-radius: var(--radius-lg); }
        .btn-round { border-radius: var(--radius-full); }

        .card {
          background: var(--card);
          border-radius: var(--radius);
          box-shadow: var(--shadow);
          overflow: hidden;
        }

        .input-group { margin-bottom: 16px; }
        .input-group label {
          display: block;
          font-size: 13px; font-weight: 600;
          color: var(--text-secondary);
          margin-bottom: 6px;
        }
        .input-group input,
        .input-group textarea {
          width: 100%;
          padding: 12px 14px;
          border: 1.5px solid var(--border);
          border-radius: var(--radius-sm);
          font-size: 15px;
          color: var(--text-primary);
          background: var(--card);
          outline: none;
          transition: border-color 0.2s, box-shadow 0.2s;
          font-family: inherit;
        }
        .input-group input:focus,
        .input-group textarea:focus {
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(37,99,235,0.1);
        }
        .input-group textarea { resize: none; min-height: 80px; }

        .badge {
          display: inline-flex; align-items: center;
          padding: 2px 8px;
          border-radius: var(--radius-full);
          font-size: 11px; font-weight: 600;
        }
        .badge-success { background: var(--success-light); color: var(--success); }
        .badge-warning { background: var(--warning-light); color: var(--warning); }
        .badge-accent { background: var(--accent-light); color: var(--accent-dark); }
        .badge-primary { background: var(--primary-light); color: var(--primary); }

        .tag {
          display: inline-flex; align-items: center; gap: 4px;
          padding: 4px 10px;
          background: var(--primary-light);
          border-radius: var(--radius-full);
          font-size: 12px; font-weight: 500;
          color: var(--primary);
        }

        /* SVG icon helper */
        .icon { display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .icon svg { width: 100%; height: 100%; }

        /* ==================== 弹窗 / 对话框 ==================== */
        .modal-overlay {
          position: fixed; top: 0; left: 0; right: 0; bottom: 0;
          background: rgba(15,23,42,0.5);
          backdrop-filter: blur(4px);
          z-index: 200;
          display: none;
          align-items: flex-end;
          justify-content: center;
        }
        .modal-overlay.active { display: flex; }
        .modal-content {
          background: var(--card);
          border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
          width: 375px;
          max-height: 70vh;
          padding: 24px 20px calc(20px + var(--safe-bottom));
          animation: slideUp 0.3s cubic-bezier(0.16,1,0.3,1);
        }
        @keyframes slideUp {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
        }
        .modal-header {
          display: flex; align-items: center; justify-content: space-between;
          margin-bottom: 20px;
        }
        .modal-title { font-size: 18px; font-weight: 700; }
        .modal-close {
          width: 28px; height: 28px;
          display: flex; align-items: center; justify-content: center;
          background: var(--bg); border-radius: 50%;
          cursor: pointer; font-size: 16px;
          color: var(--text-secondary);
          transition: background 0.2s;
        }
        .modal-close:hover { background: var(--danger-light); color: var(--danger); }

        .dialog-overlay {
          position: fixed; top: 0; left: 0; right: 0; bottom: 0;
          background: rgba(15,23,42,0.5);
          backdrop-filter: blur(4px);
          z-index: 300;
          display: none;
          align-items: center; justify-content: center;
        }
        .dialog-overlay.active { display: flex; }
        .dialog-box {
          background: var(--card);
          border-radius: var(--radius-xl);
          width: 300px;
          padding: 28px 24px 24px;
          text-align: center;
          animation: zoomIn 0.25s cubic-bezier(0.16,1,0.3,1);
          box-shadow: var(--shadow-xl);
        }
        @keyframes zoomIn {
          from { transform: scale(0.92); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        .dialog-title { font-size: 18px; font-weight: 700; margin-bottom: 8px; }
        .dialog-desc { font-size: 14px; color: var(--text-secondary); margin-bottom: 20px; line-height: 1.5; }
        .dialog-input {
          width: 100%;
          padding: 10px 14px;
          border: 1.5px solid var(--border);
          border-radius: var(--radius-sm);
          font-size: 15px;
          margin-bottom: 16px;
          outline: none;
          text-align: center;
          transition: border-color 0.2s;
        }
        .dialog-input:focus { border-color: var(--primary); }
        .dialog-actions { display: flex; gap: 12px; }
        .dialog-actions .btn { flex: 1; padding: 10px; font-size: 15px; }

        /* ==================== P0-1 启动页 ==================== */
        #page-splash {
          background: linear-gradient(160deg, #0F172A 0%, #1E3A8A 30%, #2563EB 65%, #3B82F6 100%);
          align-items: center; justify-content: center;
          color: #FFFFFF;
        }
        .splash-logo {
          width: 96px; height: 96px;
          background: rgba(255,255,255,0.15);
          border-radius: 28px;
          display: flex; align-items: center; justify-content: center;
          margin-bottom: 24px;
          backdrop-filter: blur(16px);
          border: 1.5px solid rgba(255,255,255,0.25);
          box-shadow: 0 8px 32px rgba(0,0,0,0.15);
        }
        .splash-logo svg { width: 48px; height: 48px; }
        .splash-name {
          font-size: 32px; font-weight: 800;
          margin-bottom: 8px;
          letter-spacing: 2px;
        }
        .splash-slogan {
          font-size: 15px; opacity: 0.9;
          margin-bottom: 48px;
          font-weight: 500;
        }
        .splash-hint {
          position: absolute; bottom: calc(var(--safe-bottom) + 28px);
          font-size: 14px; font-weight: 500;
          cursor: pointer;
          padding: 12px 28px;
          background: rgba(255,255,255,0.18);
          border-radius: var(--radius-full);
          border: 1px solid rgba(255,255,255,0.2);
          transition: all 0.2s;
          backdrop-filter: blur(8px);
        }
        .splash-hint:hover { background: rgba(255,255,255,0.28); }

        /* ==================== P0-2 登录页 ==================== */
        #page-login {
          background: linear-gradient(170deg, #0F172A 0%, #1E3A8A 40%, #2563EB 100%);
          color: #FFFFFF;
        }
        .login-container {
          flex: 1;
          display: flex; flex-direction: column;
          align-items: center; justify-content: center;
          padding: 40px 32px;
          margin-top: var(--safe-top);
        }
        .login-logo {
          width: 96px; height: 96px;
          background: rgba(255,255,255,0.15);
          border-radius: 28px;
          display: flex; align-items: center; justify-content: center;
          margin-bottom: 20px;
          backdrop-filter: blur(16px);
          border: 1.5px solid rgba(255,255,255,0.25);
        }
        .login-logo svg { width: 48px; height: 48px; }
        .login-title { font-size: 28px; font-weight: 800; margin-bottom: 8px; letter-spacing: 1px; }
        .login-desc { font-size: 15px; opacity: 0.85; margin-bottom: 60px; text-align: center; line-height: 1.6; }
        .login-btn-area { width: 100%; }
        .btn-hw-login {
          width: 100%; height: 52px;
          background: #CF0A2C;
          color: #fff; border: none;
          border-radius: 26px;
          font-size: 16px; font-weight: 600;
          cursor: pointer;
          display: flex; align-items: center; justify-content: center; gap: 10px;
          transition: transform 0.2s, box-shadow 0.2s;
          box-shadow: 0 4px 16px rgba(207,10,44,0.35);
        }
        .btn-hw-login:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(207,10,44,0.45); }
        .btn-hw-login:active { transform: scale(0.98); }
        .hw-logo { width: 22px; height: 22px; flex-shrink: 0; }
        .login-agreement {
          position: absolute;
          bottom: calc(var(--safe-bottom) + 20px);
          left: 32px; right: 32px;
          text-align: center;
          font-size: 12px; opacity: 0.7;
          line-height: 1.5;
        }
        .login-agreement a { color: rgba(255,255,255,0.95); text-decoration: underline; }

        /* ==================== P1-0 首页 ==================== */
        .home-header {
          background: var(--card);
          padding: var(--safe-top) 0 0;
        }
        .home-header-top {
          padding: 16px 20px 0;
          display: flex; align-items: center; justify-content: space-between;
        }
        .home-header-title {
          font-size: 22px; font-weight: 800;
          color: var(--text-primary);
          letter-spacing: -0.02em;
        }
        /* 首页无搜索入口，与当前 App 一致 */

        .home-tabs {
          display: flex;
          padding: 16px 20px 0;
          gap: 24px;
          border-bottom: 0.5px solid var(--border);
        }
        .home-tab {
          position: relative;
          padding-bottom: 12px;
          font-size: 15px; font-weight: 600;
          color: var(--text-hint);
          cursor: pointer;
          transition: color 0.2s;
        }
        .home-tab.active { color: var(--primary); }
        .home-tab.active::after {
          content: '';
          position: absolute;
          bottom: -0.5px; left: 50%; transform: translateX(-50%);
          width: 24px; height: 3px;
          background: var(--primary);
          border-radius: 2px;
        }

        /* 统计卡片 — 三色渐变 */
        .stats-card {
          margin: 16px 16px 12px;
          padding: 20px;
          background: linear-gradient(135deg, #1D4ED8 0%, #2563EB 60%, #3B82F6 100%);
          border-radius: var(--radius-lg);
          color: #fff;
          display: flex; align-items: center;
          box-shadow: 0 4px 20px rgba(37,99,235,0.25);
          position: relative;
          overflow: hidden;
        }
        .stats-card::after {
          content: '';
          position: absolute;
          right: -20px; top: -20px;
          width: 80px; height: 80px;
          background: rgba(245,158,11,0.12);
          border-radius: 50%;
          pointer-events: none;
        }
        .stats-card .stat-block { flex: 1; text-align: center; }
        .stats-card .stat-block .stat-value { font-size: 28px; font-weight: 800; }
        .stats-card .stat-block .stat-label { font-size: 11px; opacity: 0.85; margin-top: 2px; }
        .stats-card .stat-divider { width: 1px; height: 36px; background: rgba(255,255,255,0.3); }

        .create-btn-area { padding: 0 16px 12px; }
        .btn-create {
          width: 100%; padding: 14px;
          background: var(--accent-light);
          border: 2px dashed var(--accent);
          border-radius: var(--radius);
          color: var(--accent-dark);
          font-size: 15px; font-weight: 600;
          cursor: pointer;
          display: flex; align-items: center; justify-content: center; gap: 8px;
          transition: all 0.2s;
        }
        .btn-create:hover { background: var(--accent); color: #fff; border-style: solid; border-color: var(--accent); }
        .btn-create svg { width: 18px; height: 18px; }

        /* 轨迹列表 */
        .track-list { padding: 0 16px 120px; }
        .track-card {
          background: var(--card);
          border-radius: var(--radius);
          box-shadow: var(--shadow);
          margin-bottom: 12px;
          overflow: hidden;
          cursor: pointer;
          transition: transform 0.2s ease-out, box-shadow 0.2s;
        }
        .track-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }
        .track-card-cover {
          height: 140px;
          background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 60%, #FEF3C7 100%);
          position: relative; overflow: hidden;
          border-radius: var(--radius) var(--radius) 0 0;
        }
        .track-card-cover svg { width: 100%; height: 100%; }
        .track-card-info { padding: 12px 16px; }
        .track-card-info.no-cover { padding: 16px; }
        .track-card-meta { font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; }
        .proto-note { font-size: 11px; color: var(--text-hint); text-align: center; padding: 8px 16px 24px; }
        .track-card-title {
          font-size: 15px; font-weight: 700;
          margin-bottom: 4px;
          display: flex; align-items: center; gap: 8px;
        }
        .track-card-date { font-size: 12px; color: var(--text-hint); margin-bottom: 2px; }
        .track-card-desc { font-size: 13px; color: var(--text-secondary); margin-bottom: 6px; }
        .track-card-meta {
          font-size: 12px; color: var(--text-hint);
          display: flex; align-items: center; gap: 12px;
        }
        .track-card-stats {
          display: flex; gap: 14px;
          margin-top: 8px; font-size: 12px; color: var(--text-secondary);
        }
        .track-card-stats span { display: flex; align-items: center; gap: 4px; }
        .track-card-stats svg { width: 14px; height: 14px; color: var(--text-hint); }

        /* 空状态 */
        .empty-state {
          display: flex; flex-direction: column;
          align-items: center; justify-content: center;
          padding: 60px 40px; text-align: center;
        }
        .empty-icon {
          width: 80px; height: 80px;
          background: linear-gradient(135deg, var(--primary-light), #FEF3C7);
          border-radius: 50%;
          display: flex; align-items: center; justify-content: center;
          margin-bottom: 16px;
        }
        .empty-icon svg { width: 36px; height: 36px; color: var(--primary); }
        .empty-title { font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
        .empty-desc { font-size: 13px; color: var(--text-hint); margin-bottom: 20px; line-height: 1.5; }

        /* ==================== P1-2 新建轨迹 ==================== */
        .form-container { padding: 20px 20px 120px; }
        .form-tip {
          padding: 14px 16px;
          background: var(--accent-light);
          border-radius: var(--radius);
          font-size: 14px; color: var(--accent-dark);
          margin-bottom: 20px; line-height: 1.5;
          display: flex; gap: 10px; align-items: flex-start;
          border: 1px solid rgba(245,158,11,0.2);
        }
        .form-tip svg { width: 18px; height: 18px; flex-shrink: 0; margin-top: 1px; color: var(--accent); }
        .form-actions {
          position: absolute;
          bottom: 0; left: 0; right: 0;
          padding: 16px 20px calc(16px + var(--safe-bottom));
          background: var(--card);
          border-top: 0.5px solid var(--border);
        }

        /* ==================== P1-3 轨迹记录页 ==================== */
        .recording-map {
          flex: 1; position: relative;
          background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 50%, #FEF3C7 100%);
          overflow: hidden;
        }
        .recording-map .map-bg { position: absolute; top: 0; left: 0; right: 0; bottom: 0; }
        .recording-map svg { width: 100%; height: 100%; }

        .map-controls {
          position: absolute;
          right: 12px; top: calc(var(--safe-top) + 8px);
          display: flex; flex-direction: column; gap: 8px;
          z-index: 10;
        }
        .map-ctrl-btn {
          width: 40px; height: 40px;
          background: var(--card);
          border-radius: var(--radius-sm);
          display: flex; align-items: center; justify-content: center;
          box-shadow: var(--shadow-md);
          cursor: pointer;
          font-size: 13px; color: var(--text-secondary); font-weight: 600;
          border: none;
          transition: all 0.2s;
        }
        .map-ctrl-btn:hover { background: var(--bg); }
        .map-ctrl-btn svg { width: 18px; height: 18px; }

        .gps-dot {
          position: absolute;
          width: 16px; height: 16px;
          background: var(--primary);
          border: 3px solid #fff;
          border-radius: 50%;
          box-shadow: 0 0 0 4px rgba(37,99,235,0.2);
          z-index: 5;
          animation: pulse 2s infinite;
        }
        @keyframes pulse {
          0% { box-shadow: 0 0 0 4px rgba(37,99,235,0.2); }
          50% { box-shadow: 0 0 0 10px rgba(37,99,235,0.08); }
          100% { box-shadow: 0 0 0 4px rgba(37,99,235,0.2); }
        }

        .map-marker {
          position: absolute;
          display: flex; flex-direction: column; align-items: center;
          z-index: 5; transform: translate(-50%, -100%);
        }
        .marker-pin {
          width: 28px; height: 36px;
          background: var(--primary);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex; align-items: center; justify-content: center;
          box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .marker-icon { transform: rotate(45deg); font-size: 13px; font-weight: 700; color: #fff; }
        .marker-label {
          font-size: 11px; font-weight: 600;
          background: var(--card); padding: 2px 8px;
          border-radius: var(--radius-xs); box-shadow: var(--shadow);
          margin-top: 4px; white-space: nowrap;
        }
        .map-marker.start .marker-pin { background: var(--success); }
        .map-marker.end .marker-pin { background: var(--danger); }

        .recording-panel {
          position: absolute;
          bottom: 0; left: 0; right: 0;
          background: var(--card);
          border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
          box-shadow: 0 -4px 24px rgba(0,0,0,0.08);
          padding: 16px 20px calc(20px + var(--safe-bottom));
          z-index: 20;
        }
        .recording-status {
          display: flex; align-items: center; justify-content: center;
          gap: 6px; margin-bottom: 12px;
          font-size: 13px; font-weight: 600;
        }
        .status-dot {
          width: 8px; height: 8px;
          border-radius: 50%;
          background: var(--success);
          animation: blink 1s infinite;
        }
        @keyframes blink { 50% { opacity: 0.3; } }
        .recording-status.paused .status-dot { background: var(--warning); animation: none; }

        .recording-stats {
          display: flex; align-items: center; justify-content: center;
          gap: 28px; margin-bottom: 20px;
        }
        .recording-stat { text-align: center; }
        .recording-stat .stat-value { font-size: 28px; font-weight: 800; color: var(--text-primary); }
        .recording-stat .stat-label { font-size: 11px; color: var(--text-hint); margin-top: 2px; }

        .recording-actions {
          display: flex; align-items: center; justify-content: center; gap: 20px;
        }
        .rec-btn {
          border: none; border-radius: 50%;
          display: flex; align-items: center; justify-content: center;
          cursor: pointer; transition: all 0.2s;
        }
        .rec-btn svg { width: 22px; height: 22px; }
        .rec-btn-sm { width: 52px; height: 52px; background: var(--bg); color: var(--text-secondary); box-shadow: var(--shadow); }
        .rec-btn-sm svg { color: var(--primary); }
        .rec-btn-lg {
          width: 64px; height: 64px;
          background: linear-gradient(135deg, #1D4ED8, #3B82F6);
          color: #fff;
          box-shadow: 0 4px 16px rgba(37,99,235,0.35);
        }
        .rec-btn-lg svg { color: #fff; width: 26px; height: 26px; }
        .rec-btn-stop {
          width: 52px; height: 52px;
          background: var(--danger);
          color: #fff;
          box-shadow: 0 2px 8px rgba(239,68,68,0.3);
        }
        .rec-btn-stop svg { color: #fff; }
        .rec-btn:hover { transform: scale(1.05); }

        /* 图层面板 */
        .layer-panel {
          position: absolute;
          left: 12px; top: calc(var(--safe-top) + 8px);
          background: var(--card);
          border-radius: var(--radius);
          box-shadow: var(--shadow-lg);
          padding: 6px; z-index: 15;
          display: none;
        }
        .layer-panel.active { display: block; }
        .layer-option {
          display: flex; align-items: center; gap: 8px;
          padding: 8px 14px; font-size: 13px;
          cursor: pointer; border-radius: var(--radius-sm);
          transition: all 0.2s; white-space: nowrap;
        }
        .layer-option:hover { background: var(--bg); }
        .layer-option.active { background: var(--primary-light); color: var(--primary); font-weight: 600; }
        .layer-dot { width: 8px; height: 8px; border-radius: 50%; }

        /* ==================== P1-4 轨迹详情页 ==================== */
        .detail-map {
          height: 220px;
          background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 55%, #FEF3C7 100%);
          position: relative; overflow: hidden;
        }
        .detail-info { padding: 16px 20px; background: var(--card); }
        .detail-title {
          font-size: 20px; font-weight: 800; margin-bottom: 6px;
          display: flex; align-items: center; gap: 8px;
        }
        .edit-icon {
          width: 24px; height: 24px;
          display: flex; align-items: center; justify-content: center;
          background: var(--accent-light); border-radius: 50%;
          cursor: pointer;
        }
        .edit-icon svg { width: 13px; height: 13px; color: var(--accent-dark); }
        .detail-desc { font-size: 13px; color: var(--text-secondary); margin-bottom: 12px; line-height: 1.5; }
        .detail-stats {
          display: flex;
          background: var(--bg);
          border-radius: var(--radius);
          overflow: hidden;
        }
        .detail-stat-item { flex: 1; text-align: center; padding: 12px 8px; }
        .detail-stat-item + .detail-stat-item { border-left: 0.5px solid var(--border); }
        .detail-stat-item .stat-value { font-size: 20px; font-weight: 800; color: var(--primary); }
        .detail-stat-item .stat-label { font-size: 11px; color: var(--text-hint); margin-top: 2px; }

        /* 打卡点时间轴 */
        .checkpoint-section { padding: 16px 20px; }
        .section-title {
          font-size: 16px; font-weight: 700;
          margin-bottom: 12px;
          display: flex; align-items: center; gap: 8px;
        }
        .section-title svg { width: 18px; height: 18px; color: var(--primary); }
        .checkpoint-timeline { position: relative; padding-left: 28px; }
        .checkpoint-timeline::before {
          content: '';
          position: absolute;
          left: 10px; top: 8px; bottom: 8px;
          width: 2px;
          background: linear-gradient(to bottom, var(--success), var(--accent), var(--danger));
          border-radius: 1px;
          opacity: 0.3;
        }
        .checkpoint-item {
          position: relative;
          padding: 10px 14px;
          margin-bottom: 8px;
          background: var(--card);
          border-radius: var(--radius-sm);
          box-shadow: var(--shadow-sm);
          cursor: pointer;
          transition: all 0.2s;
        }
        .checkpoint-item:hover { box-shadow: var(--shadow); }
        .checkpoint-item::before {
          content: '';
          position: absolute;
          left: -22px; top: 14px;
          width: 10px; height: 10px;
          border-radius: 50%;
          background: var(--accent);
          border: 2px solid var(--accent-light);
        }
        .checkpoint-item.start::before { background: var(--success); border-color: var(--success-light); }
        .checkpoint-item.end::before { background: var(--danger); border-color: var(--danger-light); }
        .cp-name { font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 6px; }
        .cp-meta { font-size: 12px; color: var(--text-hint); margin-top: 4px; }
        .cp-has-content {
          display: inline-flex; align-items: center; gap: 3px;
          font-size: 11px; color: var(--success);
          background: var(--success-light);
          padding: 2px 6px; border-radius: 4px;
        }
        .cp-has-content svg { width: 12px; height: 12px; }

        .detail-actions { padding: 0 20px 120px; display: flex; gap: 12px; }
        .detail-actions .btn { flex: 1; }

        /* ==================== P1-5 打卡点详情页 ==================== */
        .spot-header { padding: 16px 20px; background: var(--card); }
        .spot-title {
          font-size: 22px; font-weight: 800;
          display: flex; align-items: center; gap: 8px;
          margin-bottom: 4px;
        }
        .spot-breadcrumb { font-size: 12px; color: var(--text-hint); margin-bottom: 12px; }
        .spot-location { display: flex; gap: 8px; flex-wrap: wrap; }
        .spot-location .loc-item {
          display: flex; align-items: center; gap: 4px;
          font-size: 12px; color: var(--text-secondary);
          background: var(--bg);
          padding: 4px 10px;
          border-radius: var(--radius-full);
        }
        .loc-item svg { width: 12px; height: 12px; color: var(--text-hint); }

        .spot-content { padding: 16px 20px; }
        .content-title { font-size: 16px; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 6px; }
        .content-title svg { width: 18px; height: 18px; color: var(--accent); }
        .spot-text { font-size: 14px; color: var(--text-primary); line-height: 1.8; margin-bottom: 16px; }
        .spot-photos { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 16px; }
        .spot-photo {
          aspect-ratio: 1;
          border-radius: var(--radius-sm);
          overflow: hidden;
          display: flex; align-items: center; justify-content: center;
          cursor: pointer;
          transition: transform 0.2s;
        }
        .spot-photo:hover { transform: scale(1.03); }
        .spot-photo svg { width: 24px; height: 24px; color: rgba(255,255,255,0.8); }

        .spot-actions { padding: 0 20px 120px; display: flex; gap: 12px; }
        .spot-actions .btn { flex: 1; }

        /* ==================== 分享弹窗 ==================== */
        .share-preview {
          background: linear-gradient(135deg, var(--primary-lighter), var(--accent-light));
          border-radius: var(--radius);
          padding: 16px; margin-bottom: 20px;
          text-align: center;
        }
        .preview-map {
          height: 100px;
          background: linear-gradient(135deg, #DBEAFE, #FEF3C7);
          border-radius: var(--radius-sm);
          margin-bottom: 12px;
          display: flex; align-items: center; justify-content: center;
        }
        .preview-map svg { width: 36px; height: 36px; color: var(--primary); }
        .preview-title { font-size: 16px; font-weight: 700; }
        .preview-info { font-size: 12px; color: var(--text-hint); margin-top: 4px; }
        .share-methods { display: flex; gap: 16px; justify-content: center; margin-bottom: 20px; }
        .share-method { display: flex; flex-direction: column; align-items: center; gap: 6px; cursor: pointer; }
        .method-icon {
          width: 48px; height: 48px;
          border-radius: var(--radius);
          display: flex; align-items: center; justify-content: center;
        }
        .method-icon svg { width: 22px; height: 22px; }
        .method-label { font-size: 11px; color: var(--text-secondary); }
        .share-method.wechat .method-icon { background: #07C160; color: #fff; }
        .share-method.moments .method-icon { background: #576B95; color: #fff; }
        .share-method.copy .method-icon { background: var(--bg); color: var(--text-secondary); }
        .share-method.qrcode .method-icon { background: var(--text-primary); color: #fff; }

        /* ==================== P3-1 个人中心 ==================== */
        .profile-header {
          background: linear-gradient(145deg, #0F172A 0%, #1E3A8A 35%, #2563EB 70%, #3B82F6 100%);
          padding: calc(var(--safe-top) + 28px) 20px 32px;
          color: #fff;
          text-align: center;
        }
        .profile-avatar {
          width: 76px; height: 76px;
          background: rgba(255,255,255,0.2);
          border: 3px solid rgba(255,255,255,0.4);
          border-radius: 50%;
          margin: 0 auto 12px;
          display: flex; align-items: center; justify-content: center;
          overflow: hidden;
          backdrop-filter: blur(8px);
        }
        .profile-avatar svg { width: 36px; height: 36px; flex-shrink: 0; }
        .profile-name { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
        .profile-subtitle { font-size: 13px; opacity: 0.7; }
        .profile-stats-bar {
          display: flex;
          background: rgba(255,255,255,0.12);
          border-radius: var(--radius);
          margin-top: 16px; padding: 12px 0;
          backdrop-filter: blur(10px);
          border: 1px solid rgba(255,255,255,0.1);
        }
        .profile-stat { flex: 1; text-align: center; }
        .profile-stat .p-val { font-size: 22px; font-weight: 800; }
        .profile-stat .p-label { font-size: 11px; opacity: 0.7; margin-top: 2px; }
        .profile-stat + .profile-stat { border-left: 1px solid rgba(255,255,255,0.15); }

        .profile-menu { padding: 16px 16px 120px; }
        .menu-group {
          background: var(--card);
          border-radius: var(--radius);
          box-shadow: var(--shadow);
          margin-bottom: 12px;
          overflow: hidden;
        }
        .menu-item {
          display: flex; align-items: center;
          padding: 14px 16px;
          cursor: pointer;
          transition: background 0.15s;
        }
        .menu-item:hover { background: var(--bg); }
        .menu-item + .menu-item { border-top: 0.5px solid var(--border); }
        .menu-icon {
          width: 36px; height: 36px;
          border-radius: 10px;
          display: flex; align-items: center; justify-content: center;
          margin-right: 12px;
          flex-shrink: 0;
        }
        .menu-icon svg { width: 18px; height: 18px; color: #fff; }
        .menu-icon.blue { background: var(--primary); }
        .menu-icon.green { background: var(--success); }
        .menu-icon.sky { background: #0EA5E9; }
        .menu-icon.amber { background: var(--accent); }
        .menu-text { flex: 1; font-size: 15px; font-weight: 500; }
        .menu-arrow { color: var(--text-hint); }
        .menu-arrow svg { width: 16px; height: 16px; }
        .menu-value { font-size: 13px; color: var(--text-hint); margin-right: 4px; }

        .logout-btn {
          width: 100%; padding: 14px;
          background: var(--card);
          border: none; border-radius: var(--radius);
          color: var(--danger);
          font-size: 15px; font-weight: 600;
          cursor: pointer;
          box-shadow: var(--shadow);
          transition: background 0.2s;
        }
        .logout-btn:hover { background: var(--danger-light); }

        /* ==================== P3-2 个人信息编辑页 ==================== */
        .edit-avatar-section { text-align: center; padding: 24px 20px; background: var(--card); }
        .edit-avatar {
          width: 80px; height: 80px;
          background: linear-gradient(135deg, var(--primary-light), #FEF3C7);
          border-radius: 50%;
          margin: 0 auto 12px;
          display: flex; align-items: center; justify-content: center;
          position: relative; cursor: pointer;
        }
        .edit-avatar svg { width: 40px; height: 40px; color: var(--primary); }
        .camera-badge {
          position: absolute; bottom: 0; right: 0;
          width: 28px; height: 28px;
          background: var(--accent);
          border-radius: 50%;
          border: 2px solid var(--card);
          display: flex; align-items: center; justify-content: center;
        }
        .camera-badge svg { width: 14px; height: 14px; color: #fff; }
        .edit-avatar-hint { font-size: 13px; color: var(--text-hint); }
        .edit-form { padding: 20px; background: var(--card); margin-top: 8px; }

        /* ==================== 原型导航面板 ==================== */
        .prototype-nav {
          position: fixed;
          top: 12px; right: 12px;
          z-index: 9999;
          background: var(--card);
          border-radius: var(--radius);
          box-shadow: var(--shadow-lg);
          padding: 8px;
          max-width: 200px;
        }
        .pn-title {
          font-size: 10px; font-weight: 700;
          color: var(--text-hint);
          padding: 4px 8px;
          text-transform: uppercase;
          letter-spacing: 1px;
        }
        .pn-item {
          display: block;
          padding: 6px 8px;
          font-size: 12px;
          color: var(--text-secondary);
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.15s;
          text-decoration: none;
          white-space: nowrap;
        }
        .pn-item:hover { background: var(--primary-light); color: var(--primary); }
        .pn-item.active { background: var(--primary); color: #fff; }

        @media (max-width: 420px) {
          .phone-frame { width: 100%; height: 100%; border-radius: 0; box-shadow: none; }
          .prototype-nav { display: none; }
        }
    </style>
</head>
<body>

<!-- ============ 原型页面快捷导航 ============ -->
<div class="prototype-nav" id="protoNav">
    <div class="pn-title">页面导航</div>
    <a class="pn-item active" onclick="goPage('splash')">P0-1 启动页</a>
    <a class="pn-item" onclick="goPage('login')">P0-2 登录页</a>
    <a class="pn-item" onclick="goPage('home')">P1-0 首页</a>
    <a class="pn-item" onclick="goPage('create')">P1-2 新建轨迹</a>
    <a class="pn-item" onclick="goPage('recording')">P1-3 轨迹记录</a>
    <a class="pn-item" onclick="goPage('detail')">P1-4 详情(已完成)</a>
    <a class="pn-item" onclick="goPage('detailEditing')">P1-4 详情(编辑中)</a>
    <a class="pn-item" onclick="goPage('spot')">P1-5 打卡点详情</a>
    <a class="pn-item" onclick="goPage('profile')">P3-1 个人中心</a>
    <a class="pn-item" onclick="goPage('editProfile')">P3-2 编辑信息</a>
</div>

<!--
  原型 v4：已按当前鸿蒙 App UI 反向同步（设计稿跟随 App）
  - 首页：无搜索、无统计卡片（统计在个人中心）；顶部「我的轨迹|公开轨迹」；按钮「新建扫墓轨迹」（点击先申请定位权限）；轨迹卡片含封面(140px)/无封面两种；列表支持下拉刷新、上拉自动加载更多
  - 个人中心：头部渐变+头像+昵称+统计（轨迹数/打卡点/总里程）；编辑资料 | 隐私设置 | 关于 V1.0 | 意见反馈 | 测试入口 | 退出登录
  - 公开轨迹 Tab：卡片带「公开」标签与作者·日期；空态「暂无公开轨迹」
  - 详情页：非创建者仅可查看与分享，不可编辑/删除/改可见范围
-->
<!-- ============ 手机壳 ============ -->
<div class="phone-frame">

    <!-- ============ P0-1 启动页 ============ -->
    <div class="page active" id="page-splash">
        <div class="status-bar">
            <span class="time">10:30</span>
            <span class="icons"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span>
        </div>
        <div class="splash-logo">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
        </div>
        <div class="splash-name">遨游轨迹</div>
        <div class="splash-slogan">记录每一段值得传承的路程</div>
        <div class="splash-hint" onclick="goPage('login')">点击进入</div>
    </div>

    <!-- ============ P0-2 登录页 ============ -->
    <div class="page" id="page-login">
        <div class="status-bar">
            <span class="time">10:30</span>
            <span class="icons"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span>
        </div>
        <div class="login-container">
            <div class="login-logo">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            </div>
            <div class="login-title">遨游轨迹</div>
            <div class="login-desc">记录扫墓轨迹，守护家族记忆<br>让祭祖文化更容易延续</div>
            <div class="login-btn-area">
                <button class="btn-hw-login" onclick="goPage('home')">
                    <svg class="hw-logo" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 1.5c4.69 0 8.5 3.81 8.5 8.5s-3.81 8.5-8.5 8.5S3.5 16.69 3.5 12 7.31 3.5 12 3.5z" fill="#fff"/>
                        <path d="M7.5 8.5C7.5 8.5 9 11 12 11s4.5-2.5 4.5-2.5" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M12 11v5.5" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M9 14.5l3 2 3-2" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    华为账号一键登录
                </button>
                <div style="text-align:center;margin-top:12px;font-size:12px;color:rgba(255,255,255,0.5);">首次登录将自动创建账户</div>
            </div>
        </div>
        <div class="login-agreement">
            <label style="display:flex;align-items:center;justify-content:center;gap:4px;">
                <input type="checkbox" checked style="accent-color:var(--primary)">
                已阅读并同意
            </label>
            <a href="#">《用户协议》</a> 与 <a href="#">《隐私政策》</a>
        </div>
    </div>

    <!-- ============ P1-0 首页 ============ -->
    <div class="page" id="page-home">
        <div class="status-bar dark">
            <span class="time">10:30</span>
            <span class="icons" style="color:var(--text-secondary)"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span>
        </div>
        <div class="home-header">
            <div class="home-header-top">
                <div class="home-header-title">遨游轨迹</div>
            </div>
            <div class="home-tabs">
                <div class="home-tab active" id="tab-my" onclick="switchHomeTab('my')">我的轨迹</div>
                <div class="home-tab" id="tab-public" onclick="switchHomeTab('public')">公开轨迹</div>
            </div>
        </div>

        <!-- 我的轨迹（支持下拉刷新、上拉自动加载更多） -->
        <div class="page-content" id="tab-content-my">
            <div class="create-btn-area">
                <div class="btn-create" onclick="goPage('create')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                    新建扫墓轨迹
                </div>
            </div>

            <div class="track-list">
                <div class="track-card" onclick="goPage('detail')">
                    <div class="track-card-cover">
                        <svg viewBox="0 0 375 140" preserveAspectRatio="xMidYMid slice">
                            <defs><linearGradient id="tc1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#EFF6FF"/><stop offset="55%" style="stop-color:#DBEAFE"/><stop offset="100%" style="stop-color:#FEF3C7"/></linearGradient></defs>
                            <rect fill="url(#tc1)" width="375" height="140"/>
                            <path d="M20,110 Q80,80 140,75 L200,55 Q250,40 300,50 L360,40" stroke="#2563EB" stroke-width="3" fill="none" stroke-linecap="round" opacity="0.7"/>
                            <circle cx="20" cy="110" r="4" fill="#059669" stroke="#fff" stroke-width="1.5"/>
                            <circle cx="140" cy="75" r="3" fill="#F59E0B" stroke="#fff" stroke-width="1.5"/>
                            <circle cx="360" cy="40" r="4" fill="#EF4444" stroke="#fff" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="track-card-info">
                        <div class="track-card-title">
                            刘氏家族清明扫墓
                            <span class="badge badge-success">已完成</span>
                        </div>
                        <div class="track-card-date">2026-02-05</div>
                        <div class="track-card-desc">2026年清明节，带领全家前往横县大山祭扫祖先墓地。</div>
                        <div class="track-card-stats">
                            <span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> 3.2km</span>
                            <span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></svg> 180m</span>
                            <span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> 56:12</span>
                        </div>
                    </div>
                </div>

                <div class="track-card" onclick="goPage('detailEditing')">
                    <div class="track-card-info no-cover">
                        <div class="track-card-title">
                            横县祭祖路线
                            <span class="badge badge-warning">编辑中</span>
                        </div>
                        <div class="track-card-date">2026-01-29</div>
                        <div class="track-card-desc">2026年春节回乡祭祖，横县北部山区。</div>
                        <div class="track-card-stats">
                            <span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> 2.1km</span>
                            <span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></svg> 120m</span>
                        </div>
                    </div>
                </div>
            </div>
            <p class="proto-note">列表支持下拉刷新、滚动到底自动加载更多</p>
        </div>

        <!-- 公开轨迹（卡片带「公开」标签与作者·日期） -->
        <div class="page-content" id="tab-content-public" style="display:none">
            <div class="track-list">
                <div class="track-card" onclick="goPage('detail')">
                    <div class="track-card-cover">
                        <svg viewBox="0 0 375 140" preserveAspectRatio="xMidYMid slice">
                            <defs><linearGradient id="tc2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#EFF6FF"/><stop offset="60%" style="stop-color:#DBEAFE"/></linearGradient></defs>
                            <rect fill="url(#tc2)" width="375" height="140"/>
                        </svg>
                    </div>
                    <div class="track-card-info">
                        <div class="track-card-title">
                            某用户公开路线
                            <span class="badge badge-primary">公开</span>
                        </div>
                        <div class="track-card-meta">张三 · 2026-02-01</div>
                        <div class="track-card-stats">
                            <span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> 5.0km</span>
                            <span>4个打卡点</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="empty-state" style="display:none">
                <div class="empty-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg></div>
                <div class="empty-title">暂无公开轨迹</div>
                <div class="empty-desc">把轨迹设为公开后，其他用户就能看到了</div>
            </div>
        </div>

        <div class="tab-bar">
            <div class="tab-item active" onclick="goPage('home')">
                <div class="tab-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
                <div class="tab-label">首页</div>
            </div>
            <div class="tab-item" onclick="goPage('profile')">
                <div class="tab-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg></div>
                <div class="tab-label">个人中心</div>
            </div>
        </div>
    </div>

    <!-- ============ P1-2 新建轨迹 ============ -->
    <div class="page" id="page-create">
        <div class="status-bar dark"><span class="time">10:30</span><span class="icons" style="color:var(--text-secondary)"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span></div>
        <div class="nav-bar">
            <div class="nav-back" onclick="goPage('home')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="15 18 9 12 15 6"/></svg></div>
            <div class="nav-title">新建轨迹</div>
            <div style="width:32px"></div>
        </div>
        <div class="page-content">
            <div class="form-container">
                <div class="form-tip">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18h6"/><path d="M10 22h4"/><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"/></svg>
                    <span>建议填写本次扫墓的地区、主要祖先姓氏、日期等信息，方便日后查找。</span>
                </div>
                <div class="input-group">
                    <label>轨迹名称 <span style="color:var(--danger)">*</span></label>
                    <input type="text" placeholder="例如：刘氏家族清明扫墓" value="刘氏家族清明扫墓">
                </div>
                <div class="input-group">
                    <label>轨迹简介</label>
                    <textarea placeholder="简要描述本次扫墓的目的、参与人员等">2026年清明节，带领全家前往横县大山祭扫祖先墓地，共计走访4处祖墓。</textarea>
                </div>
            </div>
        </div>
        <div class="form-actions">
            <button class="btn btn-primary btn-block btn-lg" onclick="goPage('recording')">保存并开始记录</button>
        </div>
    </div>

    <!-- ============ P1-3 轨迹记录页 ============ -->
    <div class="page" id="page-recording">
        <div class="status-bar">
            <span class="time" style="display:flex;align-items:center;gap:4px">
                <span style="width:6px;height:6px;background:var(--success);border-radius:50%;display:inline-block"></span>
                00:15:32
            </span>
            <span class="icons"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span>
        </div>

        <div style="position:absolute;left:12px;top:calc(var(--safe-top) + 8px);z-index:30">
            <button class="map-ctrl-btn" onclick="showDialog('interrupt')" style="width:36px;height:36px" title="返回">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="15 18 9 12 15 6"/></svg>
            </button>
        </div>

        <div class="recording-map">
            <div class="map-bg">
                <svg viewBox="0 0 375 500" preserveAspectRatio="xMidYMid slice">
                    <defs>
                        <linearGradient id="mapBg2" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#EFF6FF"/>
                            <stop offset="50%" style="stop-color:#DBEAFE"/>
                            <stop offset="100%" style="stop-color:#FEF3C7"/>
                        </linearGradient>
                        <pattern id="topo" width="60" height="60" patternUnits="userSpaceOnUse">
                            <path d="M0,30 Q15,20 30,30 T60,30" stroke="rgba(0,0,0,0.05)" stroke-width="0.5" fill="none"/>
                            <path d="M0,15 Q15,5 30,15 T60,15" stroke="rgba(0,0,0,0.03)" stroke-width="0.5" fill="none"/>
                        </pattern>
                    </defs>
                    <rect fill="url(#mapBg2)" width="375" height="500"/>
                    <rect fill="url(#topo)" width="375" height="500"/>
                    <path d="M80,400 Q100,370 120,350 L140,320 Q160,290 170,260 L190,230 Q200,210 220,200 L240,185 Q260,170 270,150 L280,130" stroke="#2563EB" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round" opacity="0.85"/>
                    <path d="M80,400 Q100,370 120,350 L140,320 Q160,290 170,260 L190,230 Q200,210 220,200 L240,185 Q260,170 270,150 L280,130" stroke="#2563EB" stroke-width="8" fill="none" stroke-linecap="round" opacity="0.12"/>
                </svg>
            </div>
            <div class="map-marker start" style="left:80px;top:370px">
                <div class="marker-pin"><span class="marker-icon">S</span></div>
                <div class="marker-label">山脚入口</div>
            </div>
            <div class="map-marker" style="left:170px;top:230px" onclick="toggleRecSpotPanel()">
                <div class="marker-pin"><span class="marker-icon">1</span></div>
                <div class="marker-label">刘公祖墓</div>
            </div>
            <div class="gps-dot" style="left:272px;top:122px"></div>

            <div class="map-controls" style="top:calc(var(--safe-top) + 8px)">
                <button class="map-ctrl-btn" onclick="toggleLayerPanel()" title="图层切换">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                </button>
                <button class="map-ctrl-btn" title="3D">3D</button>
            </div>

            <div class="layer-panel" id="layerPanel">
                <div class="layer-option active"><span class="layer-dot" style="background:#2563EB"></span> 标准地图</div>
                <div class="layer-option"><span class="layer-dot" style="background:#6366F1"></span> 卫星地图</div>
                <div class="layer-option"><span class="layer-dot" style="background:#0EA5E9"></span> 地形地图</div>
            </div>
        </div>

        <div class="recording-panel" id="recPanel">
            <div class="recording-status" id="recStatus">
                <span class="status-dot"></span>
                <span>录制中</span>
            </div>
            <div class="recording-stats">
                <div class="recording-stat"><div class="stat-value">2.45</div><div class="stat-label">里程(km)</div></div>
                <div class="recording-stat"><div class="stat-value">15:32</div><div class="stat-label">用时</div></div>
                <div class="recording-stat"><div class="stat-value">168</div><div class="stat-label">海拔(m)</div></div>
            </div>
            <div class="recording-actions">
                <button class="rec-btn rec-btn-sm" title="设置打卡点" onclick="showDialog('setpoint')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                </button>
                <button class="rec-btn rec-btn-lg" title="暂停" id="btnPause" onclick="togglePause()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                </button>
                <button class="rec-btn rec-btn-stop" title="设置终点" onclick="showDialog('endpoint')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- ============ P1-4 轨迹详情页（已完成） ============ -->
    <div class="page" id="page-detail">
        <div class="status-bar dark"><span class="time">10:30</span><span class="icons" style="color:var(--text-secondary)"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span></div>
        <div class="nav-bar">
            <div class="nav-back" onclick="goPage('home')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="15 18 9 12 15 6"/></svg></div>
            <div class="nav-title">轨迹详情</div>
            <div class="nav-action" onclick="showShareModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:20px;height:20px"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg></div>
        </div>
        <div class="page-content">
            <div class="detail-map">
                <svg viewBox="0 0 375 220" preserveAspectRatio="xMidYMid slice">
                    <defs><linearGradient id="mapBg3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#EFF6FF"/><stop offset="55%" style="stop-color:#DBEAFE"/><stop offset="100%" style="stop-color:#FEF3C7"/></linearGradient></defs>
                    <rect fill="url(#mapBg3)" width="375" height="220"/>
                    <path d="M30,180 Q80,140 120,130 L160,100 Q200,70 230,80 L280,60 Q320,40 360,50" stroke="#2563EB" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <circle cx="30" cy="180" r="6" fill="#059669" stroke="#fff" stroke-width="2"/>
                    <circle cx="160" cy="100" r="5" fill="#F59E0B" stroke="#fff" stroke-width="2"/>
                    <circle cx="230" cy="80" r="5" fill="#F59E0B" stroke="#fff" stroke-width="2"/>
                    <circle cx="280" cy="60" r="5" fill="#F59E0B" stroke="#fff" stroke-width="2"/>
                    <circle cx="360" cy="50" r="6" fill="#EF4444" stroke="#fff" stroke-width="2"/>
                </svg>
            </div>

            <div class="detail-info">
                <div class="detail-title">
                    刘氏家族清明扫墓
                    <span class="edit-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></span>
                    <span class="badge badge-success">已完成</span>
                </div>
                <div class="detail-desc">2026年清明节，带领全家前往横县大山祭扫祖先墓地，共计走访4处祖墓。</div>
                <div class="detail-stats">
                    <div class="detail-stat-item"><div class="stat-value">3.2</div><div class="stat-label">总里程(km)</div></div>
                    <div class="detail-stat-item"><div class="stat-value">56:12</div><div class="stat-label">用时</div></div>
                    <div class="detail-stat-item"><div class="stat-value">180</div><div class="stat-label">海拔(m)</div></div>
                    <div class="detail-stat-item"><div class="stat-value">4</div><div class="stat-label">打卡点</div></div>
                </div>
            </div>

            <div style="padding:12px 16px 0">
                <div style="display:flex;align-items:center;justify-content:space-between;background:var(--card);padding:14px 16px;border-radius:var(--radius);box-shadow:var(--shadow)">
                    <div style="display:flex;align-items:center;gap:10px">
                        <div style="width:36px;height:36px;background:var(--primary-lighter);border-radius:10px;display:flex;align-items:center;justify-content:center"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:18px;height:18px;color:var(--primary)"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></div>
                        <div>
                            <div style="font-size:14px;font-weight:600">可见范围</div>
                            <div style="font-size:12px;color:var(--text-hint)">设置轨迹对其他人是否可见</div>
                        </div>
                    </div>
                    <div style="display:flex;background:var(--bg);border-radius:var(--radius-full);padding:3px;gap:2px" id="visibilityToggle">
                        <button onclick="setVisibility('private')" id="vis-private" style="padding:6px 14px;border:none;border-radius:var(--radius-full);font-size:12px;font-weight:600;cursor:pointer;background:var(--primary);color:#fff;transition:all 0.2s">私有</button>
                        <button onclick="setVisibility('public')" id="vis-public" style="padding:6px 14px;border:none;border-radius:var(--radius-full);font-size:12px;font-weight:600;cursor:pointer;background:transparent;color:var(--text-hint);transition:all 0.2s">公开</button>
                    </div>
                </div>
            </div>

            <div class="checkpoint-section">
                <div class="section-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                    路线详情
                </div>
                <div class="checkpoint-timeline">
                    <div class="checkpoint-item start">
                        <div class="cp-name">山脚入口 <span class="tag" style="font-size:10px;padding:2px 6px;background:var(--success-light);color:var(--success)">起点</span></div>
                        <div class="cp-meta">2026-02-05 08:30 · 海拔 35m</div>
                    </div>
                    <div class="checkpoint-item" onclick="goPage('spot')">
                        <div class="cp-name">1 刘公祖墓 <span class="cp-has-content"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg> 图文</span></div>
                        <div class="cp-meta">2026-02-05 09:05 · 海拔 120m</div>
                    </div>
                    <div class="checkpoint-item" onclick="goPage('spot')">
                        <div class="cp-name">2 二世祖刘德芳墓 <span class="cp-has-content"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg> 图文</span></div>
                        <div class="cp-meta">2026-02-05 09:32 · 海拔 155m</div>
                    </div>
                    <div class="checkpoint-item" onclick="goPage('spot')">
                        <div class="cp-name">3 三世祖刘振华墓</div>
                        <div class="cp-meta">2026-02-05 10:08 · 海拔 168m</div>
                    </div>
                    <div class="checkpoint-item" onclick="goPage('spot')">
                        <div class="cp-name">4 祖母李氏墓 <span class="cp-has-content"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg> 图文</span></div>
                        <div class="cp-meta">2026-02-05 10:35 · 海拔 180m</div>
                    </div>
                    <div class="checkpoint-item end">
                        <div class="cp-name">山脚出口 <span class="tag" style="font-size:10px;padding:2px 6px;background:var(--danger-light);color:var(--danger)">终点</span></div>
                        <div class="cp-meta">2026-02-05 11:26 · 海拔 40m</div>
                    </div>
                </div>
            </div>

            <div class="detail-actions">
                <button class="btn btn-primary btn-round" onclick="showShareModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg> 分享轨迹</button>
                <button class="btn btn-outline btn-round" style="color:var(--danger);border-color:var(--danger)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg> 删除</button>
            </div>
        </div>
    </div>

    <!-- ============ P1-4b 轨迹详情页（编辑中） ============ -->
    <div class="page" id="page-detailEditing">
        <div class="status-bar dark"><span class="time">10:30</span><span class="icons" style="color:var(--text-secondary)"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span></div>
        <div class="nav-bar">
            <div class="nav-back" onclick="goPage('home')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="15 18 9 12 15 6"/></svg></div>
            <div class="nav-title">轨迹详情</div>
            <div style="width:32px"></div>
        </div>
        <div class="page-content">
            <div class="detail-info">
                <div class="detail-title">横县祭祖路线 <span class="edit-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></span> <span class="badge badge-accent">编辑中</span></div>
                <div class="detail-desc">2026年春节回乡祭祖，横县北部山区。</div>
                <div class="detail-stats">
                    <div class="detail-stat-item"><div class="stat-value">2.1</div><div class="stat-label">总里程(km)</div></div>
                    <div class="detail-stat-item"><div class="stat-value">28:45</div><div class="stat-label">用时</div></div>
                    <div class="detail-stat-item"><div class="stat-value">120</div><div class="stat-label">海拔(m)</div></div>
                    <div class="detail-stat-item"><div class="stat-value">1</div><div class="stat-label">打卡点</div></div>
                </div>
            </div>

            <div style="padding:12px 16px 0">
                <div style="display:flex;align-items:center;gap:10px;background:var(--warning-light);padding:14px 16px;border-radius:var(--radius);border:1px solid rgba(245,158,11,0.15)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:20px;height:20px;flex-shrink:0;color:var(--warning)"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    <div style="font-size:13px;color:#92400E;line-height:1.4">
                        <strong>轨迹尚未完成</strong><br>请继续记录并设置终点来完成此轨迹
                    </div>
                </div>
            </div>

            <div class="checkpoint-section">
                <div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> 已记录路线</div>
                <div class="checkpoint-timeline">
                    <div class="checkpoint-item start">
                        <div class="cp-name">山脚入口 <span class="tag" style="font-size:10px;padding:2px 6px;background:var(--success-light);color:var(--success)">起点</span></div>
                        <div class="cp-meta">2026-01-29 14:00 · 海拔 30m</div>
                    </div>
                    <div class="checkpoint-item" onclick="goPage('spot')">
                        <div class="cp-name">1 刘公祖墓 <span class="cp-has-content"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg> 图文</span></div>
                        <div class="cp-meta">2026-01-29 14:25 · 海拔 95m</div>
                    </div>
                    <div class="checkpoint-item" style="opacity:0.5;border:1.5px dashed var(--border)">
                        <div class="cp-name" style="color:var(--text-hint)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> 等待继续记录...</div>
                        <div class="cp-meta">尚未设置终点</div>
                    </div>
                </div>
            </div>

            <div class="detail-actions">
                <button class="btn btn-primary btn-round btn-block" style="font-size:16px;padding:14px" onclick="goPage('recording')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><polygon points="5 3 19 12 5 21 5 3"/></svg> 继续记录</button>
            </div>
            <div style="padding:0 20px 120px">
                <button class="btn btn-outline btn-round btn-block" style="color:var(--danger);border-color:var(--danger);margin-top:8px"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg> 删除轨迹</button>
            </div>
        </div>
    </div>

    <!-- ============ P1-5 打卡点详情页 ============ -->
    <div class="page" id="page-spot">
        <div class="status-bar dark"><span class="time">10:30</span><span class="icons" style="color:var(--text-secondary)"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span></div>
        <div class="nav-bar">
            <div class="nav-back" onclick="goPage('detail')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="15 18 9 12 15 6"/></svg></div>
            <div class="nav-title">打卡点详情</div>
            <div style="width:32px"></div>
        </div>
        <div class="page-content">
            <div class="spot-header">
                <div class="spot-title">刘公祖墓 <span class="edit-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></span></div>
                <div class="spot-breadcrumb">刘氏家族清明扫墓 · 打卡点 #1</div>
                <div class="spot-location">
                    <div class="loc-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> 23.7275°N 108.3426°E</div>
                    <div class="loc-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></svg> 海拔 120m</div>
                    <div class="loc-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> 2026-02-05 09:05</div>
                </div>
            </div>
            <div style="height:8px;background:var(--bg)"></div>
            <div class="spot-content">
                <div class="content-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg> 图文记录</div>
                <div class="spot-text">
                    此处为刘氏始祖刘公之墓，始建于清康熙年间（约1680年），坐北朝南，依山而建。刘公名讳已不可考，族谱中记为"一世祖刘公"。<br><br>
                    墓前原有石碑一方，经数百年风化已字迹模糊，2020年族人集资重立石碑，碑文记述刘公生平及后裔分支。
                </div>
                <div class="spot-photos">
                    <div class="spot-photo" style="background:linear-gradient(135deg,#DBEAFE,#93C5FD)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg></div>
                    <div class="spot-photo" style="background:linear-gradient(135deg,#FEF3C7,#FDE68A)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg></div>
                    <div class="spot-photo" style="background:linear-gradient(135deg,#EFF6FF,#BFDBFE)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg></div>
                </div>
            </div>
            <div style="height:8px;background:var(--bg)"></div>
            <div style="padding:16px 20px">
                <div class="content-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> 人物信息</div>
                <div style="display:flex;flex-direction:column;gap:10px">
                    <div style="display:flex;align-items:center;gap:8px"><span style="font-size:13px;color:var(--text-hint);width:56px">姓氏</span><span style="font-size:14px;font-weight:500">刘氏</span></div>
                    <div style="display:flex;align-items:center;gap:8px"><span style="font-size:13px;color:var(--text-hint);width:56px">辈分</span><span style="font-size:14px;font-weight:500">一世祖</span></div>
                    <div style="display:flex;align-items:center;gap:8px"><span style="font-size:13px;color:var(--text-hint);width:56px">年代</span><span style="font-size:14px;font-weight:500">清康熙年间（约1680年）</span></div>
                </div>
            </div>
            <div class="spot-actions">
                <button class="btn btn-primary btn-round"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg> 编辑图文</button>
                <button class="btn btn-outline btn-round" style="color:var(--danger);border-color:var(--danger)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg> 删除</button>
            </div>
        </div>
    </div>

    <!-- ============ P3-1 个人中心 ============ -->
    <div class="page" id="page-profile">
        <div class="status-bar"><span class="time">10:30</span><span class="icons"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span></div>
        <div class="page-content" style="padding-bottom:0">
            <div class="profile-header">
                <div class="profile-avatar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg></div>
                <div class="profile-name">刘阿强</div>
                <div class="profile-subtitle">刘氏 · 广西横县</div>
                <div class="profile-stats-bar">
                    <div class="profile-stat"><div class="p-val">3</div><div class="p-label">轨迹</div></div>
                    <div class="profile-stat"><div class="p-val">12</div><div class="p-label">打卡点</div></div>
                    <div class="profile-stat"><div class="p-val">8.5</div><div class="p-label">总里程km</div></div>
                </div>
            </div>

            <div class="profile-menu">
                <div class="menu-group">
                    <div class="menu-item" onclick="goPage('editProfile')">
                        <div class="menu-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
                        <span class="menu-text">编辑资料</span>
                        <span class="menu-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></span>
                    </div>
                </div>

                <div class="menu-group">
                    <div class="menu-item">
                        <div class="menu-icon sky"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></div>
                        <span class="menu-text">隐私设置</span>
                        <span class="menu-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></span>
                    </div>
                    <div class="menu-item">
                        <div class="menu-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg></div>
                        <span class="menu-text">关于</span>
                        <span class="menu-value">V1.0</span>
                        <span class="menu-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></span>
                    </div>
                    <div class="menu-item">
                        <div class="menu-icon amber"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></div>
                        <span class="menu-text">意见反馈</span>
                        <span class="menu-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></span>
                    </div>
                    <div class="menu-item">
                        <div class="menu-icon amber"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg></div>
                        <span class="menu-text">测试入口</span>
                        <span class="menu-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></span>
                    </div>
                </div>

                <button class="logout-btn" onclick="goPage('login')">退出登录</button>
            </div>
        </div>

        <div class="tab-bar">
            <div class="tab-item" onclick="goPage('home')">
                <div class="tab-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
                <div class="tab-label">首页</div>
            </div>
            <div class="tab-item active" onclick="goPage('profile')">
                <div class="tab-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg></div>
                <div class="tab-label">个人中心</div>
            </div>
        </div>
    </div>

    <!-- ============ P3-2 个人信息编辑页 ============ -->
    <div class="page" id="page-editProfile">
        <div class="status-bar dark"><span class="time">10:30</span><span class="icons" style="color:var(--text-secondary)"><span>&#9679;</span> <span>&#9679;</span> <span>&#128267;</span></span></div>
        <div class="nav-bar">
            <div class="nav-back" onclick="goPage('profile')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="15 18 9 12 15 6"/></svg></div>
            <div class="nav-title">编辑个人信息</div>
            <div class="nav-action">保存</div>
        </div>
        <div class="page-content">
            <div class="edit-avatar-section">
                <div class="edit-avatar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6"/></svg>
                    <span class="camera-badge"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg></span>
                </div>
                <div class="edit-avatar-hint">点击更换头像</div>
            </div>
            <div style="height:8px;background:var(--bg)"></div>
            <div class="edit-form">
                <div class="input-group"><label>昵称</label><input type="text" placeholder="请输入昵称" value="刘阿强"></div>
                <div class="input-group"><label>所属家族</label><input type="text" placeholder="例如：刘氏" value="刘氏"></div>
                <div class="input-group"><label>个性签名</label><textarea placeholder="一句话介绍自己">守护家族记忆，传承祭祖文化</textarea></div>
            </div>
        </div>
    </div>

    <!-- ============ 分享弹窗 ============ -->
    <div class="modal-overlay" id="modal-share">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">分享轨迹</div>
                <div class="modal-close" onclick="hideShareModal()">×</div>
            </div>
            <div class="share-preview">
                <div class="preview-map"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg></div>
                <div class="preview-title">刘氏家族清明扫墓</div>
                <div class="preview-info">3.2km · 4个打卡点 · 海拔180m</div>
            </div>
            <div class="share-methods">
                <div class="share-method wechat"><div class="method-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></div><div class="method-label">微信好友</div></div>
                <div class="share-method moments"><div class="method-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg></div><div class="method-label">朋友圈</div></div>
                <div class="share-method qrcode"><div class="method-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg></div><div class="method-label">二维码</div></div>
                <div class="share-method copy"><div class="method-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg></div><div class="method-label">复制链接</div></div>
            </div>
            <button class="btn btn-primary btn-block btn-round" onclick="hideShareModal()">生成分享海报</button>
        </div>
    </div>

    <!-- ============ 设置打卡点弹窗 ============ -->
    <div class="dialog-overlay" id="dialog-setpoint">
        <div class="dialog-box">
            <div class="dialog-title">设置打卡点</div>
            <div class="dialog-desc">已记录当前位置坐标，请为此墓地点命名</div>
            <input class="dialog-input" type="text" placeholder="例如：祖父某某之墓" value="二世祖刘德芳墓" style="text-align:left">
            <div class="dialog-actions">
                <button class="btn btn-outline" onclick="hideDialog('setpoint')">取消</button>
                <button class="btn btn-primary" onclick="hideDialog('setpoint');goPage('spot')">确认并记录</button>
            </div>
        </div>
    </div>

    <!-- ============ 中断记录确认弹窗 ============ -->
    <div class="dialog-overlay" id="dialog-interrupt">
        <div class="dialog-box">
            <div class="dialog-title">中断记录</div>
            <div class="dialog-desc">当前轨迹正在记录中，是否暂时退出？<br><span style="font-size:12px;color:var(--text-hint)">退出后可在轨迹详情页继续记录</span></div>
            <div class="dialog-actions">
                <button class="btn btn-outline" onclick="hideDialog('interrupt')">继续录制</button>
                <button class="btn btn-primary" onclick="hideDialog('interrupt');goPage('detailEditing')">暂时退出</button>
            </div>
        </div>
    </div>

    <!-- ============ 设置终点弹窗 ============ -->
    <div class="dialog-overlay" id="dialog-endpoint">
        <div class="dialog-box">
            <div class="dialog-title">设置终点</div>
            <div class="dialog-desc">确认当前位置为轨迹终点并结束记录？</div>
            <input class="dialog-input" type="text" placeholder="请输入终点名称" value="山脚出口">
            <div class="dialog-actions">
                <button class="btn btn-outline" onclick="hideDialog('endpoint')">取消</button>
                <button class="btn btn-accent" onclick="hideDialog('endpoint');goPage('detail')">确认结束</button>
            </div>
        </div>
    </div>

</div><!-- /phone-frame -->

<script>
    function goPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      const page = document.getElementById('page-' + pageId);
      if (page) page.classList.add('active');
      document.querySelectorAll('.pn-item').forEach(item => item.classList.remove('active'));
      document.querySelectorAll('.pn-item').forEach(item => {
        if (item.getAttribute('onclick') && item.getAttribute('onclick').includes("'" + pageId + "'")) item.classList.add('active');
      });
    }

    function switchHomeTab(tab) {
      document.getElementById('tab-my').classList.toggle('active', tab === 'my');
      document.getElementById('tab-public').classList.toggle('active', tab === 'public');
      document.getElementById('tab-content-my').style.display = tab === 'my' ? 'block' : 'none';
      document.getElementById('tab-content-public').style.display = tab === 'public' ? 'block' : 'none';
    }

    let isPaused = false;
    function togglePause() {
      isPaused = !isPaused;
      const btn = document.getElementById('btnPause');
      const status = document.getElementById('recStatus');
      if (isPaused) {
        btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polygon points="5 3 19 12 5 21 5 3"/></svg>';
        status.classList.add('paused');
        status.querySelector('span:last-child').textContent = '已暂停';
      } else {
        btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>';
        status.classList.remove('paused');
        status.querySelector('span:last-child').textContent = '录制中';
      }
    }

    function setVisibility(type) {
      const privBtn = document.getElementById('vis-private');
      const pubBtn = document.getElementById('vis-public');
      if (type === 'private') {
        privBtn.style.background = 'var(--primary)'; privBtn.style.color = '#fff';
        pubBtn.style.background = 'transparent'; pubBtn.style.color = 'var(--text-hint)';
      } else {
        pubBtn.style.background = 'var(--primary)'; pubBtn.style.color = '#fff';
        privBtn.style.background = 'transparent'; privBtn.style.color = 'var(--text-hint)';
      }
    }

    function toggleLayerPanel() {
      document.getElementById('layerPanel').classList.toggle('active');
    }

    function showShareModal() { document.getElementById('modal-share').classList.add('active'); }
    function hideShareModal() { document.getElementById('modal-share').classList.remove('active'); }
    function showDialog(id) { document.getElementById('dialog-' + id).classList.add('active'); }
    function hideDialog(id) { document.getElementById('dialog-' + id).classList.remove('active'); }

    document.querySelectorAll('.layer-option').forEach(opt => {
      opt.addEventListener('click', function() {
        document.querySelectorAll('.layer-option').forEach(o => o.classList.remove('active'));
        this.classList.add('active');
        document.getElementById('layerPanel').classList.remove('active');
      });
    });

    document.getElementById('modal-share').addEventListener('click', function(e) {
      if (e.target === this) hideShareModal();
    });
</script>
</body>
</html>
